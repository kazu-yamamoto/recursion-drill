# おわりに

再帰は難しいと思われているようだ。たとえば、Joel Spolsky 氏は[Javaスクールの危険](http://local.joelonsoftware.com/wiki/Java%E3%82%B9%E3%82%AF%E3%83%BC%E3%83%AB%E3%81%AE%E5%8D%B1%E9%99%BA)で以下のようなことを書いている。

> 私のささやかな経験から言わせてもらうと、伝統的に大学のコンピュータサイエンスのカリキュラムで教えられているもので、多くの人がうまく理解できないものが2つあった: ポインタと再帰だ。 

再帰が難しいと思われている理由を私なりに分析したいと思う。このドリルを終えた人なら、再帰に「ループと同等の再帰」と「ループを超えた再帰」があること理解したはずである。

もし「ループと同等の再帰」が難しいのであれば、それは単によい入門書に出会わなかったからである。

もし「ループを超えた再帰」が難しいのであれば、それは再帰が難しいのではなく、問題自体が難しいのだ。

この「再帰ドリル」は、「よい入門書があれば、再帰の習得はそれほど難しくない」という信念の下に書かれた。再帰を系統立てて包括的に扱った。「ループと同等の再帰」は簡単に理解できるように、「ループを超えた再帰」は理解が不可能でないように、注意して説明したつもりだ。

再帰を大きな山に例えると、このドリルを終えた人は、8合目ぐらいまでは登ったことになる。ここまでの景色で満足できるなら、あとはたくさんの練習と実践での利用あるのみだ。もっと高みを目指すなら、例えば多相再帰のような特殊な分野にも足を踏み入れる必要がある。

もっと勉強するための指針を以下に示そう。

- 再帰がある程度分かったら、再帰をなるべく使わないで、高階関数を用いた部品プログラミングを学ぼう。そちらの方が、コードが明瞭になる。再帰の勉強はなんだったのかと思う人もいるかもしれないが、高階関数は再帰を使って書かれている。単に部品を使うだけのプログラマから、いざとなれば部品を自作できるプログラマになった訳だ。このテーマを学ぶには[プログラミングHaskell 第2版](https://www.amazon.co.jp/%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0Haskell-%E7%AC%AC2%E7%89%88-Grahum-Hutton/dp/4908686076)がいいだろう。

- リストに関する再帰を学ぶためには、Haskellの[Data.List](https://hackage.haskell.org/package/base/docs/Data-List.html)を冒険してみるのがいいだろう。説明と型のみから、実装を考えるのは実によい訓練になる。

- 二分探索木を平衡させる方法について学ぼう。平衡させるには「木の回転」という知識が必要になる。平衡木としては AVLや赤黒木が有名だが、Haskell の [Data.Set](https://hackage.haskell.org/package/containers/docs/Data-Set.html) では重み平衡木(weight balanced tree)が採用されている。

- 平衡探索木が完成したら、効率のよい集合演算(和集合、共通部分、差集合)の実装に挑戦してみよう。

- 探索木の親戚であるヒープ(優先順位付きキュー)を学ぼう。[関数プログラミングの楽しみ](http://www.amazon.co.jp/%E9%96%A2%E6%95%B0%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0%E3%81%AE%E6%A5%BD%E3%81%97%E3%81%BF-%EF%BC%AA%EF%BD%85%EF%BD%92%EF%BD%85%EF%BD%8D%EF%BD%99-%EF%BC%A7%EF%BD%89%EF%BD%82%EF%BD%82%EF%BD%8F%EF%BD%8E%EF%BD%93-%EF%BD%81%EF%BD%8E%EF%BD%84-%EF%BC%AF%EF%BD%85%EF%BD%87%EF%BD%85-%EF%BD%84%EF%BD%85-%EF%BC%AD%EF%BD%8F%EF%BD%8F%EF%BD%92/dp/4274068056)の第一章に「ねじれヒープ」(Skew heap)が載っている。二項ヒープ(二分ヒープと間違えないように)についても調べてみるといいだろう。

- 多相再帰を理解するためには、[フィンガーツリー](http://ja.wikipedia.org/wiki/2-3_%E3%83%95%E3%82%A3%E3%83%B3%E3%82%AC%E3%83%BC%E3%83%84%E3%83%AA%E3%83%BC)を調べよう。Haskellでの実装は、[Data.Sequence](https://hackage.haskell.org/package/containers/docs/Data-Sequence.html)である。

